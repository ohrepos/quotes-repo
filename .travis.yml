language: clojure
lein: lein2
jdk:
- openjdk7
language: java
before_install:
- git config --global user.email "ohyecloudy@gmail.com"
- git config --global user.name "ohyecloudy"
install:
- git clone https://$GH_TOKEN@github.com/ohrepos/quotes-repo.git --branch=gh-pages result
- git clone https://github.com/ohyecloudy/tbot-quote-builder.git builder
- cd builder;lein uberjar
script:
- java -jar ./builder/target/tbot-quote-builder-standalone.jar -s ./src/q-src.clj -o ./result/quotes -b http://ohrepos.github.io/quotes-repo/quotes/ -t @bquote_bot
after_success:
- cd result
- git remote rm origin
- git remote add origin https://$GH_TOKEN@github.com/ohrepos/quotes-repo.git
- git add -f .
- git commit -m "Travis build $TRAVIS_BUILD_NUMBER pushed to gh-pages"
- git push -fq origin gh-pages

env:
  global:
    secure: JrwHEzWkBDm7SFPVw+4uCRqHe5Wlp7nmgOgM3OxnIWLFsnd9Cxx06tasQPufQqnEEyYEpWabkggqxDnYSNiKS0KhWWDpFnaJE16yegx2YB0pI9bSq5FGumKDUBhrK9X7M1OdKLexu/AcHvh9ztfZTRs+l0FARxVffR5Phb4maU8= 

